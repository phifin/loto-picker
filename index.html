<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#0f172a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Loto" />
    <title>Loto TÃ¢n TÃ¢n</title>

    <link rel="manifest" href="./manifest.json" />
    <link rel="apple-touch-icon" href="./assets/icon-192.png" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3CradialGradient id='g' cx='30%25' cy='30%25'%3E%3Cstop offset='0%25' stop-color='%23ffffff'/%3E%3Cstop offset='60%25' stop-color='%23facc15'/%3E%3Cstop offset='100%25' stop-color='%23ca8a04'/%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='46' fill='url(%23g)' stroke='%23a16207' stroke-width='4'/%3E%3Ccircle cx='50' cy='50' r='34' fill='%23ffffff'/%3E%3Ctext x='50' y='63' text-anchor='middle' font-family='system-ui,Segoe UI,Arial' font-size='40' font-weight='900' fill='%230f172a'%3E7%3C/text%3E%3C/svg%3E"
    />

    <link rel="stylesheet" href="./assets/styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  </head>
  <body>
    <!-- Install Prompt Banner -->
    <div id="installBanner" class="install-banner hidden">
      <div class="install-banner-content">
        <p class="install-banner-text">
          ğŸ“± ThÃªm vÃ o mÃ n hÃ¬nh chÃ­nh Ä‘á»ƒ chÆ¡i tiá»‡n hÆ¡n!
        </p>
        <div id="installIosHint" class="install-ios-hint hidden">
          Cháº¡m <strong>Share</strong> (â–¡â†‘) â†’
          <strong>ThÃªm vÃ o MÃ n hÃ¬nh chÃ­nh</strong>
        </div>
        <div class="install-banner-actions">
          <button
            type="button"
            id="btnInstall"
            class="install-btn install-btn-primary"
          >
            ThÃªm
          </button>
          <button
            type="button"
            id="btnDismiss"
            class="install-btn install-btn-secondary"
          >
            Äá»ƒ sau
          </button>
        </div>
      </div>
    </div>

    <div class="wrap">
      <!-- Role + Mode Selection Screen -->
      <div id="modeScreen">
        <div class="mode-screen-header">
          <button
            type="button"
            class="btn-back-mode hidden"
            id="btnBackToRole"
            title="Quay láº¡i chá»n vai trÃ²"
          >
            â† Quay láº¡i vai trÃ²
          </button>
          <h2>ğŸ¯ Loto TÃ¢n TÃ¢n by Fly Vo</h2>
        </div>

        <!-- Step 1: Role selection -->
        <p class="mode-subtitle" id="roleSubtitle">Chá»n vai trÃ² cá»§a báº¡n</p>
        <div class="role-selection mode-selection" id="roleSelection">
          <button class="mode-btn" id="btnRoleUser">
            <span class="mode-icon">ğŸ™‚</span>
            <span class="mode-title">NgÆ°á»i chÆ¡i</span>
            <span class="mode-desc">ÄÃ¡nh dáº¥u sá»‘ theo ngÆ°á»i Ä‘á»c</span>
          </button>
          <button class="mode-btn" id="btnRoleHost">
            <span class="mode-icon">ğŸ™ï¸</span>
            <span class="mode-title">Chá»§ trÃ²</span>
            <span class="mode-desc">Gá»i sá»‘ ngáº«u nhiÃªn + Ã¢m thanh</span>
          </button>
        </div>

        <!-- Step 2: Mode selection (shown after role is chosen) -->
        <p class="mode-subtitle hidden" id="modeSubtitle">
          Chá»n cÃ¡ch chÆ¡i cá»§a báº¡n
        </p>
        <div class="mode-selection hidden" id="modeSelection">
          <button class="mode-btn" id="btnSingleMode">
            <span class="mode-icon">ğŸ²</span>
            <span class="mode-title">ChÆ¡i 1 bÃ n</span>
            <span class="mode-desc">Táº­p trung vÃ o má»™t bÃ n duy nháº¥t</span>
          </button>
          <button class="mode-btn" id="btnMultiMode">
            <span class="mode-icon">ğŸ°</span>
            <span class="mode-title">ChÆ¡i nhiá»u bÃ n</span>
            <span class="mode-desc">ÄÃ¡nh dáº¥u Ä‘á»“ng bá»™ trÃªn nhiá»u bÃ n</span>
          </button>
        </div>
      </div>

      <!-- Board Selection Screen -->
      <div id="selectScreen" class="hidden">
        <div class="select-screen-header">
          <button
            type="button"
            class="btn-back-mode"
            id="btnBackToMode"
            title="Quay láº¡i chá»n mode"
          >
            â† Chá»n mode
          </button>
          <h2 id="selectTitle">ğŸ¯ Chá»n bÃ n Loto</h2>
        </div>
        <div id="multiSelectInfo" class="hidden multi-select-info">
          <div class="selected-boards-container">
            <span class="selected-label"
              >ÄÃ£ chá»n: <strong id="selectedCount">0</strong> bÃ n
              <span class="hint">(tá»‘i thiá»ƒu 2 bÃ n)</span></span
            >
            <button id="btnStartMulti" class="btn-start-multi" disabled>
              Báº¯t Ä‘áº§u chÆ¡i
            </button>
          </div>
        </div>
        <div class="board-list" id="boardList"></div>
      </div>

      <!-- Game Screen -->
      <div id="gameScreen" class="hidden">
        <div class="actions" id="actionsBar">
          <button
            class="theme-toggle theme-toggle-inline"
            id="themeToggleGame"
            title="Chuyá»ƒn Ä‘á»•i theme"
            aria-label="Chuyá»ƒn Ä‘á»•i theme"
          >
            <span class="icon sun-icon active">â˜€ï¸</span>
            <span class="icon moon-icon">ğŸŒ™</span>
          </button>
          <input
            id="numberInput"
            type="text"
            inputmode="numeric"
            autocomplete="off"
            maxlength="2"
            placeholder="Nháº­p sá»‘ â†’ Enter"
            aria-label="Nháº­p sá»‘"
          />
          <!-- Host-only controls (shown when á»Ÿ vai trÃ² Chá»§ trÃ²) -->
          <button class="action-btn host-only" id="btnHostStartPause">
            Báº¯t Ä‘áº§u
          </button>
          <button class="action-btn host-only" id="btnHostSettings">
            CÃ i Ä‘áº·t
          </button>
          <button class="action-btn host-only" id="btnHostCheck">
            Kiá»ƒm tra
          </button>
          <button class="action-btn host-only" id="btnHostMore">
            â‹¯
          </button>
          <label
            class="color-picker-wrap"
            title="Äá»•i mÃ u bÃ n"
            id="colorPickerWrap"
          >
            <input type="color" id="colorPicker" />
          </label>
          <button class="action-btn" id="btnReset">Reset vÃ¡n má»›i</button>
          <button class="action-btn" id="btnBack">â† Äá»•i bÃ n</button>
        </div>

        <!-- Host More menu (mobile) -->
        <div id="hostMoreMenu" class="host-more-menu">
          <button type="button" id="hostMoreSettings">CÃ i Ä‘áº·t</button>
          <button type="button" id="hostMoreCheck">Kiá»ƒm tra</button>
        </div>

        <div id="boardsContainer"></div>
        <div
          id="virtualNumpad"
          class="virtual-numpad hidden"
          aria-hidden="true"
        >
          <div class="numpad-row">
            <button type="button" class="numpad-key" data-key="1">1</button>
            <button type="button" class="numpad-key" data-key="2">2</button>
            <button type="button" class="numpad-key" data-key="3">3</button>
          </div>
          <div class="numpad-row">
            <button type="button" class="numpad-key" data-key="4">4</button>
            <button type="button" class="numpad-key" data-key="5">5</button>
            <button type="button" class="numpad-key" data-key="6">6</button>
          </div>
          <div class="numpad-row">
            <button type="button" class="numpad-key" data-key="7">7</button>
            <button type="button" class="numpad-key" data-key="8">8</button>
            <button type="button" class="numpad-key" data-key="9">9</button>
          </div>
          <div class="numpad-row">
            <button
              type="button"
              class="numpad-key numpad-key--backspace"
              data-key="backspace"
              aria-label="XÃ³a"
            >
              âŒ«
            </button>
            <button type="button" class="numpad-key" data-key="0">0</button>
            <button
              type="button"
              class="numpad-key numpad-key--enter"
              data-key="enter"
              aria-label="ÄÃ¡nh dáº¥u"
            >
              âœ“
            </button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="./src/app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
      // Register Service Worker for PWA
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("./sw.js").catch(() => {});
        });
      }
    </script>
  </body>
</html>
