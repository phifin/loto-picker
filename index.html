<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#0f172a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Loto" />
    <title>Loto T√¢n T√¢n</title>

    <link rel="manifest" href="./manifest.json" />
    <link rel="apple-touch-icon" href="./assets/icon-192.png" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3CradialGradient id='g' cx='30%25' cy='30%25'%3E%3Cstop offset='0%25' stop-color='%23ffffff'/%3E%3Cstop offset='60%25' stop-color='%23facc15'/%3E%3Cstop offset='100%25' stop-color='%23ca8a04'/%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='46' fill='url(%23g)' stroke='%23a16207' stroke-width='4'/%3E%3Ccircle cx='50' cy='50' r='34' fill='%23ffffff'/%3E%3Ctext x='50' y='63' text-anchor='middle' font-family='system-ui,Segoe UI,Arial' font-size='40' font-weight='900' fill='%230f172a'%3E7%3C/text%3E%3C/svg%3E"
    />

    <link rel="stylesheet" href="./assets/styles.css" />
  </head>
  <body>
    <!-- Install Prompt Banner -->
    <div id="installBanner" class="install-banner hidden">
      <div class="install-banner-content">
        <p class="install-banner-text">üì± Th√™m v√†o m√†n h√¨nh ch√≠nh ƒë·ªÉ ch∆°i ti·ªán h∆°n!</p>
        <div id="installIosHint" class="install-ios-hint hidden">
          Ch·∫°m <strong>Share</strong> (‚ñ°‚Üë) ‚Üí <strong>Th√™m v√†o M√†n h√¨nh ch√≠nh</strong>
        </div>
        <div class="install-banner-actions">
          <button type="button" id="btnInstall" class="install-btn install-btn-primary">Th√™m</button>
          <button type="button" id="btnDismiss" class="install-btn install-btn-secondary">ƒê·ªÉ sau</button>
        </div>
      </div>
    </div>

    <div class="wrap">
      <!-- Mode Selection Screen -->
      <div id="modeScreen">
        <h2>üéØ Loto T√¢n T√¢n</h2>
        <p class="mode-subtitle">Ch·ªçn c√°ch ch∆°i c·ªßa b·∫°n</p>
        <div class="mode-selection">
          <button class="mode-btn" id="btnSingleMode">
            <span class="mode-icon">üé≤</span>
            <span class="mode-title">Ch∆°i 1 b√†n</span>
            <span class="mode-desc">T·∫≠p trung v√†o m·ªôt b√†n duy nh·∫•t</span>
          </button>
          <button class="mode-btn" id="btnMultiMode">
            <span class="mode-icon">üé∞</span>
            <span class="mode-title">Ch∆°i nhi·ªÅu b√†n</span>
            <span class="mode-desc">ƒê√°nh d·∫•u ƒë·ªìng b·ªô tr√™n nhi·ªÅu b√†n</span>
          </button>
        </div>
      </div>

      <!-- Board Selection Screen -->
      <div id="selectScreen" class="hidden">
        <div class="select-screen-header">
          <button type="button" class="btn-back-mode" id="btnBackToMode" title="Quay l·∫°i ch·ªçn mode">‚Üê Ch·ªçn mode</button>
          <h2 id="selectTitle">üéØ Ch·ªçn b√†n Loto</h2>
        </div>
        <div id="multiSelectInfo" class="hidden multi-select-info">
          <div class="selected-boards-container">
            <span class="selected-label"
              >ƒê√£ ch·ªçn: <strong id="selectedCount">0</strong> b√†n
              <span class="hint">(t·ªëi thi·ªÉu 2 b√†n)</span></span
            >
            <button id="btnStartMulti" class="btn-start-multi" disabled>
              B·∫Øt ƒë·∫ßu ch∆°i
            </button>
          </div>
        </div>
        <div class="board-list" id="boardList"></div>
      </div>

      <!-- Game Screen -->
      <div id="gameScreen" class="hidden">
        <div class="actions" id="actionsBar">
          <button class="theme-toggle theme-toggle-inline" id="themeToggleGame" title="Chuy·ªÉn ƒë·ªïi theme" aria-label="Chuy·ªÉn ƒë·ªïi theme">
            <span class="icon sun-icon active">‚òÄÔ∏è</span>
            <span class="icon moon-icon">üåô</span>
          </button>
          <input
            id="numberInput"
            type="text"
            inputmode="numeric"
            autocomplete="off"
            maxlength="2"
            placeholder="Nh·∫≠p s·ªë ‚Üí Enter"
            aria-label="Nh·∫≠p s·ªë"
          />
          <label
            class="color-picker-wrap"
            title="ƒê·ªïi m√†u b√†n"
            id="colorPickerWrap"
          >
            <input type="color" id="colorPicker" />
          </label>
          <button class="action-btn" id="btnReset">Reset v√°n m·ªõi</button>
          <button class="action-btn" id="btnBack">‚Üê ƒê·ªïi b√†n</button>
        </div>

        <div id="boardsContainer"></div>
        <div id="virtualNumpad" class="virtual-numpad hidden" aria-hidden="true">
          <div class="numpad-row">
            <button type="button" class="numpad-key" data-key="1">1</button>
            <button type="button" class="numpad-key" data-key="2">2</button>
            <button type="button" class="numpad-key" data-key="3">3</button>
          </div>
          <div class="numpad-row">
            <button type="button" class="numpad-key" data-key="4">4</button>
            <button type="button" class="numpad-key" data-key="5">5</button>
            <button type="button" class="numpad-key" data-key="6">6</button>
          </div>
          <div class="numpad-row">
            <button type="button" class="numpad-key" data-key="7">7</button>
            <button type="button" class="numpad-key" data-key="8">8</button>
            <button type="button" class="numpad-key" data-key="9">9</button>
          </div>
          <div class="numpad-row">
            <button type="button" class="numpad-key numpad-key--backspace" data-key="backspace" aria-label="X√≥a">‚å´</button>
            <button type="button" class="numpad-key" data-key="0">0</button>
            <button type="button" class="numpad-key numpad-key--enter" data-key="enter" aria-label="ƒê√°nh d·∫•u">‚úì</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="./src/app.js"></script>
    <script>
      // Register Service Worker for PWA
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("./sw.js").catch(() => {});
        });
      }
    </script>
  </body>
</html>
